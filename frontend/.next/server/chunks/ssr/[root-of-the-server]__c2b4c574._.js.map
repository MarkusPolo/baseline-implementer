{"version":3,"sources":["../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../frontend/src/app/macros/edit/%5Bid%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { MacroEditor } from \"@/components/MacroEditor\";\r\n\r\nexport default function EditMacroPage({ params }: { params: { id: string } }) {\r\n    const router = useRouter();\r\n    const { id } = params;\r\n    const [macro, setMacro] = useState<any>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            fetch(`/api/macros/${id}`)\r\n                .then((res) => {\r\n                    if (!res.ok) throw new Error(\"Macro not found\");\r\n                    return res.json();\r\n                })\r\n                .then((data) => setMacro(data))\r\n                .catch((err) => {\r\n                    console.error(err);\r\n                    alert(\"Failed to load macro\");\r\n                    router.push(\"/macros\");\r\n                })\r\n                .finally(() => setLoading(false));\r\n        }\r\n    }, [id, router]);\r\n\r\n    const handleSave = async (name: string, description: string, steps: any[], schema: any) => {\r\n        try {\r\n            const response = await fetch(`/api/macros/${id}`, {\r\n                method: \"PUT\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    name,\r\n                    description,\r\n                    steps,\r\n                    config_schema: schema\r\n                }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                alert(\"Macro updated successfully!\");\r\n                router.push(\"/macros\");\r\n            } else {\r\n                const err = await response.json();\r\n                alert(`Error: ${JSON.stringify(err.detail)}`);\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert(\"Failed to update macro\");\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"text-center py-12 text-neutral-500\">Loading macro...</div>;\r\n    if (!macro) return null;\r\n\r\n    return (\r\n        <div className=\"mx-auto max-w-4xl py-6\">\r\n            <MacroEditor\r\n                initialSteps={macro.steps}\r\n                initialName={macro.name}\r\n                initialDescription={macro.description}\r\n                onSave={handleSave}\r\n                onCancel={() => router.push(\"/macros\")}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"+iBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,kBAAkB,+BCFzCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,0CCAzC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,EAAc,CAAE,QAAM,CAA8B,EACxE,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,IAAE,CAAE,CAAE,CAAG,EACT,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,MAClC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEvC,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACF,GACA,CADI,KACE,CAAC,YAAY,EAAE,EAAA,CAAI,EACpB,IAAI,CAAC,AAAC,IACH,GAAI,CAAC,EAAI,EAAE,CAAE,MAAU,AAAJ,MAAU,mBAC7B,OAAO,EAAI,IAAI,EACnB,GACC,IAAI,CAAC,AAAC,GAAS,EAAS,IACxB,KAAK,CAAE,AAAD,IACH,QAAQ,KAAK,CAAC,GACd,MAAM,wBACN,EAAO,IAAI,CAAC,UAChB,GACC,OAAO,CAAC,IAAM,GAAW,GAEtC,EAAG,CAAC,EAAI,EAAO,EAEf,IAAM,EAAa,MAAO,EAAc,EAAqB,EAAc,KACvE,GAAI,CACA,IAAM,EAAW,MAAM,MAAM,CAAC,YAAY,EAAE,EAAA,CAAI,CAAE,CAC9C,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,MACjB,cACA,EACA,QACA,cAAe,CACnB,EACJ,GAEA,GAAI,EAAS,EAAE,CACX,CADa,KACP,+BACN,EAAO,IAAI,CAAC,eACT,CACH,IAAM,EAAM,MAAM,EAAS,IAAI,GAC/B,MAAM,CAAC,OAAO,EAAE,KAAK,SAAS,CAAC,EAAI,MAAM,EAAA,CAAG,CAChD,CACJ,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,GACd,MAAM,yBACV,CACJ,SAEA,AAAI,EAAgB,CAAA,EAAA,EAAA,EAAP,CAAO,EAAC,MAAA,CAAI,UAAU,8CAAqC,qBACnE,EAGD,CAAA,EAAA,EAHQ,AAGR,GAAA,EAAC,MAAA,CAAI,UAAU,kCACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CACR,aAAc,EAAM,KAAK,CACzB,YAAa,EAAM,IAAI,CACvB,mBAAoB,EAAM,WAAW,CACrC,OAAQ,EACR,SAAU,IAAM,EAAO,IAAI,CAAC,eATrB,IAavB","ignoreList":[0,1]}